<!DOCTYPE HTML>
<html>
<head>
   <meta charset="utf-8">
    <title>HomeWork_lesson2_1</title>
    <style>
		.main {
			height: 200px;
			width: 200px;
			background-color:  #b58d70;
			border:1px solid #442d25;
		}
		.dark, .dark1, .light, .light1, .aktiv {
			float: left;
			border-radius:4px;
			height: 20px;
			width: 20px;
			text-align: center;
		}
		.dark{
			border:1px solid #d6e9c6;
			background-color: #eaeaea;
		}
	
		.dark1 {
			border:1px solid #d6e9c6;
			background-color: #313830;
		}

		.light {
			border:1px solid #d6e9c6;
			background-color: #acb8ab;
		}
		.light1 {
			border:1px solid #6d8c53;
			background-color: #d6e9c6;
		}
		.aktiv {
			border:1px solid #d6e9c6;
			background-color: #33FF33;
		}
		#chess {
			height: 180px;
			width: 180px;
			margin-left: 21px;
		}
		#num {
			float: left;
			height: 180px;
			width: 20px;
		}
		#letter {
			height: 22px;
			width: 200px;
		}
		#res {
			height: 22px;
			width: 50px;
			border:1px solid #d6e9c6;
			background-color: #b58d70;
			float: left;
		}
	</style>
</head>


<body>
  <div class="main"> </div>
  <div class="main"> </div>
  <div class="main"> </div>
  <script type="text/javascript">

  function Chessboard (dom_node) {
  	var div_cell, div_num, div_chess, div_letter;
  	
		div_letter = document.createElement('div'); //горизонтальный див для букв
 		div_letter.id="letter";
		dom_node.appendChild(div_letter);
		
	 	div_num = document.createElement('div'); //вертикальный див для цифр
	 	div_num.id="num";
	 	dom_node.appendChild(div_num);
	 	
 		div_chess = document.createElement('div'); //див для ячеек поля
  	div_chess.id="chess";
   	dom_node.appendChild(div_chess);

   	this.run=function (light,dark){
   		if (!light) {var light='light'}; //чтобы задать класс ячеек по умолчанию, но не работает.
   		if (!dark) {var dark='dark'};

   		div_cell = document.createElement('div'); //первая ячейка
	  	div_cell.className=light;
	 		div_letter.appendChild(div_cell);

   		for (i=0; i<8; i++){
 				div_cell = document.createElement('div'); //ячейки с буквами
 				div_cell.className=light;
 				div_letter.appendChild(div_cell);
 		  	div_cell.innerHTML = String.fromCharCode(65+i);
		
		 		div_cell = document.createElement('div'); //ячейки с цифрами
		 		div_cell.className=light;
		 		div_num.appendChild(div_cell);
		 		div_cell.innerHTML = (8-i);
		
		  		for (var j=0; j<8; j++) { //ячейки поля
		 	 			if ((j+i)%2==0) {
		    			div_cell = document.createElement('div');
		    	 		div_cell.setAttribute('tabindex','1');
		 	 				div_cell.className=dark;
		 	 				div_chess.appendChild(div_cell);} else {
		 	 				div_cell = document.createElement('div');
		 	 				div_cell.className=light;
		 	 				div_cell.setAttribute('tabindex','1');
		 	 				div_chess.appendChild(div_cell);
		 	 				};
 		 			};
			};
   	};
		
 	function cellName(i1) { //определяю адрес активной ячейки
		var res=String.fromCharCode(65+i1%8)+(8-parseInt(i1/8));
		div_res.innerHTML = res;
	};


	function delActiv() { //удаление класса активной ячейки
		if (aktiv !=0 ) {
				aktiv.classList.remove('aktiv');
			}
	};
	
	div_res = document.createElement('div'); //див для вывода результата нажатия на клетку
	div_res.id="res"
	document.body.appendChild(div_res);
	
	var aktiv=0; //для активной ячейки
	
	var elems = div_chess.children; //массив ячеек
	elems = Array.prototype.slice.call(elems);
	
	elems.forEach(function(elem) {
		elem.addEventListener('click', function(event){ //курсором
		delActiv();
		elem.classList.add('aktiv');
		var i=elems.indexOf(elem);
		cellName(i);
		aktiv = event.currentTarget;
		});	
	});  	

};	

var board = new Chessboard(document.body.childNodes[1]);
board.run('light', 'dark');
//board.cellName();

//var board1 = new Chessboard(document.body.childNodes[3]);
//board1.run('light1', 'dark1');


	</script>

</body>
</html>
